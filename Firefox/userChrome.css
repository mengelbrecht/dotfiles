@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
@namespace html url("http://www.w3.org/1999/xhtml");

/**********************************************************************************************************************/

/* Variables to modify the style */

:root {
  --mod-url-font: "PragmataPro";
  --toolbarbutton-border-radius: 0px !important;
  --bar-height: 25px;
}

/**********************************************************************************************************************/

/* Remove line above tabs */

.tab-line {
  display: none !important;
}

/**********************************************************************************************************************/

/* Hide titlebar placeholders and buttons */

.titlebar-spacer[type="pre-tabs"] {
  width: 13px !important;
}

.titlebar-spacer[type="post-tabs"] {
  display: none !important;
}

/**********************************************************************************************************************/

/* Move the "title changed" notification dot on pinned tabs to the upper right and restyle it */

.tab-content[pinned][attention]:not([selected]),
.tab-content[pinned][titlechanged]:not([selected]),
.tab-content[attention]:not([selected]) {
  /* Context variables do not seem to work in embedded svg files */
  background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 10 10" width="5" height="5" xmlns="http://www.w3.org/2000/svg"><circle cx="5" cy="5" r="5" fill="%234b7bec"/></svg>') !important;
  background-position: top 3px right 3px !important;
}

/**********************************************************************************************************************/

/* Let new tab button fill the right side of the tabbar. */

.tabs-newtab-button .toolbarbutton-icon,
#new-tab-button .toolbarbutton-icon {
  margin-left: -1px !important;
  /* Make the icon a little smaller */
  padding: 8px 10px 8px 9px !important;
}

/**********************************************************************************************************************/

/* Move menu button to the left */

#PanelUI-button {
  -moz-box-ordinal-group: 0 !important;
  /* Remove separator before menu button */
  border-inline-start: 0px !important;
  margin-left: -1px !important;
}

/**********************************************************************************************************************/

/* Decrease height of side borders to prevent overlap */

.tabbrowser-tab::before,
.tabbrowser-tab::after,
.titlebar-spacer[type="pre-tabs"] {
  margin-bottom: 1px !important;
}

/**********************************************************************************************************************/

/*
 * Only show tab close button on hover
 * https://www.reddit.com/r/FirefoxCSS/comments/7faicl/any_way_to_hide_close_tab_button_until_you_hover
 */

.tabbrowser-tab:not([pinned]) .tab-close-button {
  transition: opacity 200ms !important;
}

.tabbrowser-tab:not([pinned]):not([hover]) .tab-close-button {
  opacity: 0 !important;
  width: 0 !important;
  overflow: hidden;
}

.tabbrowser-tab:not([pinned]):hover .tab-close-button {
  opacity: 1 !important;
  width: auto !important;
}

/**********************************************************************************************************************/

/* Make tab close icon smaller */

.tabbrowser-tab:not([pinned]) .tab-close-button {
  width: 14px !important;
  height: 14px !important;
}

/**********************************************************************************************************************/

/*
 * Remove shadow on tabs scroll icons
 * https://github.com/Maxmel/dotfiles/blob/81ea2120e2da313431d3417327cf57a8a7fe5b68/userChrome.css#L226
 */

.tabbrowser-arrowscrollbox > .arrowscrollbox-overflow-start-indicator:not([collapsed]),
.tabbrowser-arrowscrollbox > .arrowscrollbox-overflow-end-indicator:not([collapsed]) {
  background: none !important;
  border: none !important;
}

/**********************************************************************************************************************/

/* Hide page action button */

#pageActionButton {
  display: none;
}

/**********************************************************************************************************************/

/* Shrink tabbar */

#tabbrowser-tabs {
  --tab-min-height: calc(1px + var(--bar-height)) !important;
  height: var(--bar-height) !important;
}

#TabsToolbar {
  height: var(--bar-height) !important;
}

/* Shrink urlbar */

#urlbar,
#urlbar:hover {
  box-shadow: none !important;
  margin: 0px !important;
  border: none !important;
}

/**********************************************************************************************************************/

/* Highlight the selected tab */

.tabbrowser-tab > .tab-stack > .tab-background[selected] {
  background-color: rgba(0, 0, 0, 0.1) !important;
  background-image: none !important;
}

#TabsToolbar[brighttext] .tabbrowser-tab > .tab-stack > .tab-background[selected] {
  background-color: rgba(255, 255, 255, 0.1) !important;
}

/* Show border at the bottom of selected and hovered tabs */

.tab-background[selected],
.tabbrowser-tab:hover > .tab-stack > .tab-background:not([selected]) {
  border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
}

/**********************************************************************************************************************/

/* Use custom font for urls */

.urlbar-input-box,
.autocomplete-richlistitem .ac-url,
#statuspanel[type="overLink"] {
  font-family: var(--mod-url-font) !important;
}

/* Shrink navbar url font size a little */

.urlbar-input-box {
  font-size: 13px !important;
}

/* Slightly increase statuspanel url font size */

#statuspanel[type="overLink"] {
  font-size: 12px !important;
}

/**********************************************************************************************************************/

/*
 * Hide the identity label and the separator if the identity is verified.
 * Instead, use blue for the connection icon instead of green to signal that the identity is verified.
 */

/* Hide separator in urlbar */

#urlbar[pageproxystate="valid"] > #identity-box.verifiedIdentity,
#urlbar[pageproxystate="valid"] > #identity-box.chromeUI,
#urlbar[pageproxystate="valid"] > #identity-box.extensionPage {
  padding-inline-end: 4px !important;
  margin-inline-end: 4px !important;
  border-inline-end: none !important;
}

/* Hide separator on not secure sites */

#identity-box.notSecureText {
  border-image-slice: 0 !important;
  margin-right: 0px !important;
}

/* Hide identity label */

#identity-icon-labels {
  display: none !important;
}

/**********************************************************************************************************************/

/* Only show page actions on hover */

#urlbar-container:not(:hover) #urlbar:not([focused]) #page-action-buttons {
  opacity: 0 !important;
  transition: opacity 150ms ease !important;
  width: 0 !important;
  overflow: hidden;
}

#urlbar-container:hover #page-action-buttons {
  opacity: 1 !important;
  transition: opacity 150ms ease !important;
  width: auto !important;
}

/**********************************************************************************************************************/

/* Use grayscale favicons for not hovered/selected tabs */

.tabbrowser-tab .tab-icon-image {
  filter: grayscale(100%) !important;
  transition: filter 200ms !important;
  margin-top: 0px !important;
}

.tabbrowser-tab:hover .tab-icon-image,
.tabbrowser-tab[selected] .tab-icon-image {
  filter: none !important;
}

.tab-bottom-line {
  margin-left: -28px !important;
  margin-right: -28px !important;
}

/**********************************************************************************************************************/

/*
 * Only show urlbar when urlbar is focused (using CMD+L)
 * https://github.com/rstacruz/firefox-stealthfox/blob/204d9e23c2250aa92213a7fced494ec63ec6993b/userChrome.minimal.css 
 */

:root {
  --stealth-fade-in-speed: 100ms;
  --stealth-fade-out-speed: 250ms;
}

#main-window:not([customizing]) #navigator-toolbox {
  overflow: hidden !important;
}

#main-window:not([customizing]) #TabsToolbar,
#main-window:not([customizing]) #nav-bar {
  transition: opacity var(--stealth-fade-out-speed) ease-out,
    transform var(--stealth-fade-out-speed) ease-in !important;
}

#main-window:not([customizing]) #nav-bar {
  height: calc(var(--bar-height)) !important;
  transform: translate3d(0, calc(-1 * var(--bar-height)), 0) !important;
}

#main-window:not([customizing]) #nav-bar {
  opacity: 0 !important;
  margin-top: calc(-1 * var(--bar-height)) !important;
  pointer-events: none !important;
}

#main-window:not([customizing]) #navigator-toolbox:focus-within #nav-bar,
#main-window:not([customizing]) #navigator-toolbox:focus-within #TabsToolbar {
  transition: opacity var(--stealth-fade-in-speed) ease-out,
    transform var(--stealth-fade-in-speed) ease-in !important;
}

#main-window:not([customizing]) #navigator-toolbox:focus-within #nav-bar {
  opacity: 1 !important;
  z-index: 100 !important;
  pointer-events: auto !important;
  transform: translate3d(0, 0, 0) !important;
}

#main-window:not([customizing]) #navigator-toolbox:focus-within #TabsToolbar {
  opacity: 0 !important;
  pointer-events: none !important;
  transform: translate3d(0, calc(0.5 * var(--bar-height)), 0) !important;
}
